
<div class="row header_bgcolor">
  <div class="col-sm-3"><h5>NEW RFQ</h5></div>
  <div class="col-sm-3"></div>
  <div class="col-sm-3"></div>
  <div class="col-sm-3 mb-2" style="float: right;">
    <!-- <a [routerLink]="['/buyer/rfq']">View RFQ's</a> -->
    <button type="button" class="btn btn-success mr-2" (click)="createRfq()">Save</button>
    <button type="button" class="btn btn-primary mr-2" (click)="discard()">Discard</button>
    <button type="button" class="btn btn-primary" (click)="close()">Close</button>
  </div>
</div>


<div class="row" [formGroup]="createForm">
<div class="col-sm-6">
  <div class="row">
    <div class="col-sm-5 label_form">RFQNo#</div>
    <div class="col-sm-7"> <input type="text" class="form-control mt-3" formControlName="rfqId" disabled="true"></div>
  </div>

  <div class="row">
    <div class="col-sm-5 label_form">Vendor<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7">  <select formControlName="supplier" class="form-control mt-3" (change)="chooseBuyer($event)">
        <option value="" selected="selected">Select</option>
        <option value="{{item.id}}" *ngFor="let item of suppliers">{{item.username}}</option>
    </select></div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">Currency<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7"> <select formControlName="currency" class="form-control mt-3">
        <option value="" selected="selected">Select</option>
        <option value="{{item.name}}" *ngFor="let item of currencies">{{item.name}}</option>
    </select></div>
  </div>

   <div class="row">
    <div class="col-sm-5 label_form">Payment Terms<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7"> <select formControlName="paymentTerm" class="form-control mt-3">
        <option value="" selected="selected">Select</option>
        <option value="{{item.name}}" *ngFor="let item of paymentTerms">{{item.name}}</option>
    </select></div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">Delivery Terms<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7"> 
      <select formControlName="deliveryTerm" class="form-control mt-3">
        <option value="" selected="selected">Select</option>
        <option value="{{item.name}}" *ngFor="let item of deliveryTerms">{{item.name}}</option>
    </select></div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">Shipment Terms<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7">   <select formControlName="shipmentTerm" class="form-control mt-3">
        <option value="" selected="selected">Select</option>
        <option value="{{item.name}}" *ngFor="let item of shipmentTerms">{{item.name}}</option>
    </select></div>
  </div>

      <div class="row">
    <div class="col-sm-5 label_form">Traget Delivery Date<span class="mandatory_labl">*</span></div>
    <div class="col-sm-7">
      <input formControlName="deliveryDate" [owlDateTime]="deliveryDate" [owlDateTimeTrigger]="deliveryDate" placeholder="Target Delivery Date" class="form-control mt-3" [min]="minDate">
      <owl-date-time #deliveryDate></owl-date-time> 
      <!-- <input type="text" class="form-control mt-3" placeholder="delivery date" required="" autofocus="" formControlName="deliveryDate">  -->
    </div>
  </div>
</div>

<div  class="col-sm-6 rightdiv">
    <div class="row">
    <div class="col-sm-5 label_form">Status</div>
    <div class="col-sm-7">  <input type="text" class="form-control mt-3" required="" autofocus="" formControlName="status" value="OPEN" disabled="true">  </div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">CreatedOn</div>
    <div class="col-sm-7">   <input type="text" class="form-control mt-3" required="" autofocus="" formControlName="createdOn" value="{{createdOn}}" disabled="true">  </div>
  </div>

  <div class="row">
    <div class="col-sm-5 label_form">CreatedBy</div>
    <div class="col-sm-7">  <input type="text" class="form-control mt-3" required="" autofocus="" formControlName="createdBy" value="{{createdBy}}" disabled="true">  </div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">UpdateOn</div>
    <div class="col-sm-7"><input type="text" class="form-control mt-3" formControlName="updatedOn" value="" disabled="true">  </div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">UpdateBy</div>
    <div class="col-sm-7"> <input type="text" class="form-control mt-3" formControlName="updatedBy" value="" disabled="true"> </div>
  </div>

    <div class="row">
    <div class="col-sm-5 label_form">Quoted Delivery Date</div>
    <div class="col-sm-7"> 
       <input [owlDateTime]="quoteddeliveryDate" class="form-control mt-3" [owlDateTimeTrigger]="quoteddeliveryDate" placeholder="Quoted Delivery Date" formControlName="quoteddeliveryDate" readonly>
      <owl-date-time #quoteddeliveryDate [disabled]="true"></owl-date-time>
   </div>
  </div>
<br><br><br>
</div>



<div class="row">
  <div class="col-sm-3"></div>
  <div class="col-sm-3"></div>
  <div class="col-sm-3"></div>
  <div class="col-sm-3">
   <button type="button" class="btn btn-primary" (click)="addItem()" style="float: right;
        margin-right: 150px;
    margin-left: 1020px;">Add</button>
  </div>
  <br><br><br>
</div>



<div class="row col-12">
  <!-- <div class="col-sm-1"></div> -->
<div class="col-sm-12" style="float: right">
  <table class="table table-hover">
    <thead>
    <tr>
      <th class="greyTd">S. No</th>
      <th class="greyTd">Item Code</th>
      <th class="greyTd">Item Name</th>
      <th class="greyTd">UOM</th>
      <th class="greyTd">Qty</th>
      <th class="greyTd">Target Price</th>
      <th class="greyTd">Quoted Price</th>
      <!-- <th class="greyTd">Value</th> -->
      <!-- <th class="greyTd">Action</th> -->
    </tr>
    </thead>
    <tbody>
    <tr *ngIf="totalitems?.length===0">
      No items added Yet!.
    </tr>

    <tr *ngFor="let item of totalitems; let i=index">
      <td>{{i+1}}.</td>
      <td>{{item.itemcode}}</td> 
      <td>{{item.itemname}}</td> 
      <td>{{item.uom}}</td>
      <td>{{item.qty}}</td>
      <td>{{item.buyerprice}}</td>
      <td>{{item.vendorprice}}</td> 
      <!-- <td>{{item.value}}</td> -->
      <td><button type="button" class="btn btn-primary" (click)="edit(item,i)">Edit</button></td>
      <td>
        <a href="#">
        </a>
        <img src="../../assets/images/delete.png" class="clsDelete" (click)="deleteItem(item,i);">
      </td>
    </tr>
    </tbody>
  </table>
</div>
</div>
<br><br><br><br><br><br><br>


<div class="row col-12">
  <div class="col-sm-3">Comment</div>
  
    <!-- <div class="col-sm-1">Comment</div> -->
      <textarea type="textarea" class="form-control col-sm-12" required="" autofocus="" formControlName="comment" cols="20" rows="5"></textarea>
  
</div>

</div>




 <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 *ngIf="!updateButton">Add Item</h4>
        <h4 *ngIf="updateButton">Edit Item</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <!-- <button type="button" class="close" (click)="close()">&times;</button> -->
      </div>

  <form class="form-signin card" [formGroup]="itemForm">

  <div class="row">
    <div class="col-sm-3">Item Code<span class="mandatory_labl">*</span></div>
    <div class="col-sm-8"> <select formControlName="itemcode" class="form-control mt-3" (change)="chooseItem($event)">
        <option value="" selected="selected">Select</option>
        <option value="{{item.code}}" *ngFor="let item of items">{{item.code}}</option>
      </select>
       <div class="small" *ngIf="!itemForm.controls['itemcode'].valid">
        <span *ngIf="itemForm.controls['itemcode'].errors['required']" class="small redlabe text-danger">Item code cannot be left blank</span>
      </div>
    </div>
  </div>

   <div class="row">
    <div class="col-sm-3">Item Name<span class="mandatory_labl">*</span></div>
    <div class="col-sm-8">  <input type="text" class="form-control mt-3" required="" autofocus="" formControlName="itemname" disabled="true"> </div>
  </div>


   <div class="row">
    <div class="col-sm-3">UOM<span class="mandatory_labl">*</span></div>
    <div class="col-sm-8"><input type="text" class="form-control mt-3" required="" autofocus="" formControlName="uom" disabled="true"> </div>
  </div>


   <div class="row">
    <div class="col-sm-3">Quantity<span class="mandatory_labl">*</span></div>
    <div class="col-sm-8"><label for="inputEmail" class="sr-only">Qty</label>
      <input type="number" class="form-control mt-3" placeholder="0.00" required="" autofocus="" formControlName="qty" >
      <div class="small" *ngIf="!itemForm.controls['qty'].valid&&itemForm.controls['qty'].dirty" class="redlabe">
        <span *ngIf="itemForm.controls['qty'].errors['required']" class="small redlabe text-danger">qty cannot be left blank</span>
      </div></div>
  </div>


   <div class="row">
    <div class="col-sm-3">Target Price<span class="mandatory_labl">*</span></div>
    <div class="col-sm-8">   <label for="inputEmail" class="sr-only">Target Price</label>
      <input type="number" class="form-control mt-3" placeholder="0.00" required="" autofocus="" formControlName="buyerprice">
      <div class="small" *ngIf="!itemForm.controls['buyerprice'].valid&&itemForm.controls['buyerprice'].dirty" class="redlabe">
        <span *ngIf="itemForm.controls['buyerprice'].errors['required']" class="small redlabe text-danger">Target price cannot be left blank</span>
      </div></div>
  </div>


   <div class="row">
    <div class="col-sm-3">Quoted Price</div>
    <div class="col-sm-8"><input type="number" class="form-control mt-3" required="" autofocus="" formControlName="vendorprice" placeholder="0.00" disabled="true"> </div>
  </div>
     
 <!-- <div class="row">
    <div class="col-sm-3">Total Price</div>
    <div class="col-sm-8"><input type="text" class="form-control mt-3" required="" autofocus="" formControlName="value" value="" disabled="true" (keydown)="totalVlaue()"></div>
  </div> -->
  <br>
  
   </form>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="saveItem()" *ngIf="!updateButton">Save</button>
          <button type="button" class="btn btn-primary" (click)="updateItem()" *ngIf="updateButton">Update</button>
        </div>
      </div>
      
    </div>
  </div>
  
